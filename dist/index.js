var n=class{mask;load;icon="default";message="";zIndex=3e3;delay=500;timestemp=0;timeoutId=null;constructor(){this.init()}init(){let e=document.createElement("div");e.className="request-loading-mask",e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.bottom="0",e.style.left="0",e.style.zIndex=`${this.zIndex}`,this.mask=e;let t=document.createElement("div");t.className="request-loading-wrap",t.style.zIndex=`${this.zIndex+1}`,this.load=t}getIconTemplate(e){switch(e){case"bar":return'<div class="request-loading--bar"></div>';case"dot":return'<div class="request-loading--dot"><div></div><div></div><div></div></div>';default:return'<div class="request-loading--default"></div>'}}setConfig(e){this.zIndex=e.zIndex||this.zIndex,this.delay=e.delay||500,this.icon=e.icon||"default"}getViewTopZIndex(){let e=document.elementFromPoint(window.innerWidth/2,window.innerHeight/2),t=this.zIndex;for(;e&&e.tagName.toLocaleLowerCase()!=="body"&&e.parentElement;){let i=Number(getComputedStyle(e).zIndex);i&&i>t&&(t=i+1),e=e.parentElement}return t}getLoadContent(e){e=e||{};let t=e.icon||this.icon,i=e.message||this.message,o=`<div>${this.getIconTemplate(t)}`;return i&&(o+=`<div class="request-loading-message">${i}</div>`),o+="</div>",o}show(e){if(this.timestemp>0)return;this.timestemp=Date.now();let t=this.getViewTopZIndex();this.mask.style.zIndex=`${t}`,this.load.style.zIndex=`${t+1}`,this.load.innerHTML=this.getLoadContent(e),document.body.appendChild(this.mask),this.timeoutId=setTimeout(()=>{document.body.appendChild(this.load),this.timeoutId=null},this.delay)}hide(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null);let e=this.timestemp;if(this.timestemp=0,this.load.parentElement){let t=Date.now()-e,i=t-this.delay<300?300-(t-this.delay):0;setTimeout(()=>{document.body.removeChild(this.load),this.mask.parentElement&&document.body.removeChild(this.mask)},i)}else this.mask.parentElement&&document.body.removeChild(this.mask)}};var u=new n;export{u as default};
